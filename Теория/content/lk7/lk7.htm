<!-- (C) 2016 Хаджинова Н.В., каф. ИТАС, БГУИР -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//RU">
<HTML>
<HEAD>
<LINK rel=stylesheet href="Оболочка/css/style.css" type=text/css>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1251">
<META HTTP-EQUIV="Content-Language" CONTENT="ru">
<title>Лекция № 7 &quot;Алгоритмы обработки растровых изображений&quot;</title>
</head>

<body>
<div align="center">
  <h1>Лекция № 7 &quot;<strong>Алгоритмы обработки растровых изображений&quot;</strong> </h1>
</div>
<hr>
<h2>Темы, рассматриваемые в данной лекции: </h2>
<ol>
  <li>Регулировка яркости и контрастности</li>
  <li>Построение гистограммы.</li>
  <li>Масштабирование изображений.</li>
  <li>Геометрические преобразования изображений.<hr>
  </li>
</ol>
<p>Часто в компьютерной графике возникает задача обработки  изображений. Обработка, как правило, заключается в наложении на изображение  каких-либо эффектов &ndash; это размытие, резкость, деформация, шум и т. д., а также  в регулировке уровня яркости и контраста.</p>
<h3><a name="_Toc116974029"></a><a name="_Toc88449705">Яркость  и контраст</a></h3>
<p>Яркость и контраст являются субъективными характеристиками  изображения, воспринимаемыми человеком.<br>
  Яркость представляет собой характеристику, определяющую то,  на сколько сильно цвета пикселей отличаются от чёрного цвета. Например, если  оцифрованная фотография сделана в солнечную погоду, то ее яркость будет  значительной. С другой стороны, если фотография сделана вечером или ночью, то  её яркость будет невелика.<br>
  Контраст представляет собой  характеристику того, насколько большой разброс имеют цвета пикселей  изображения. Чем больший разброс имеют значения цветов пикселей, тем больший контраст  имеет изображение.<br>
  По аналогии с терминами теории вероятностей можно отметить,  что яркость представляет собой как бы математическое ожидание значений выборки,  а контраст &nbsp;&ndash; дисперсию значений выборки.<br>
  Яркость и контраст могут рассматриваться не только для всего  изображения, но и для отдельных фрагментов. Таким образом, возникают понятия  локальной яркости и локального контраста.<br>
  Часто требуется изменить яркость или контраст изображения.  Рассмотрим функцию, областью определения и значений которой являются значения  цветовых компонент в модели RGB. Аргументом функции является цвет пикселя  исходного изображения. Значение функции представляет собой цвет пикселя  обработанного изображения. Для изменения яркости/контраста функция применяется  для каждого пикселя изображения.<br>
  Для нормализации выходных значений функции (они должны принадлежать  отрезку [0, 1], как для каждого компонента модели RGB) используется так  называемая арифметика с насыщением. В арифметике с насыщением при возникновении  переполнений или заёмов фиксируется наибольшее представимое или наименьшее  представимое значения соответственно. Например, если в результате  преобразования оказывается, что значение какого-либо компонента модели RGB  меньше 0, то берётся значение, равное 0. На практике же каждый элемент матрицы  изображения с 16777216 цветами представляет собой 24-битное значение, где  каждый компонент модели RGB представлен 8-ю битами. Поэтому вместо интервала  [0, 1] используется интервал [0, 255].<br>
  Если яркость и контраст изображения никак не меняются в  процессе преобразования, то функция имеет график, представленный на рис. 2.12,  а.&nbsp; Из рисунка видно, что функция в этом  случае просто передаёт на выход значение своего аргумента.<br>
  <img width="604" height="174" src="lk5_clip_image002.gif"><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; а&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; б&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;в<br>
  Рис. <a name="Рис_растр_яркость"></a>2.12 . Графики яркости</p>
<p>Яркость для рассматриваемой функции представляет собой сдвиг  прямой линии в вертикальном направлении. Яркость изображения увеличивается  пропорционально сдвигу прямой. Если прямая сдвигается вверх (рис. 2.12,  б), яркость изображения увеличивается, а если прямая сдвигается вниз (рис. 2.12,  в) &ndash; уменьшается. <br>
Поскольку используется арифметика с насыщением, то при  установке определённой яркости изображения либо оно полностью окажется засвеченным,  либо полностью затемнённым. <br>
При использовании преобразования контраста прямая линия  меняет свой наклон. При увеличении контраста изображения (рис. 2.13,  а) наклон прямой увеличивается, при уменьшении контраста &ndash; уменьшается (рис. 2.13,  б). При этом сдвиг прямой в горизонтальном направлении означает, что помимо  контраста изменяется и яркость изображения.<br>
<img width="588" height="200" src="lk5_clip_image001.gif"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;а&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; б<br>
Рис. <a name="Рис_растр_контрастность"></a>2.13 . Графики контрастности</p>
<p>Комбинации наклона и сдвига прямой позволяют одновременно  изменять и яркость, и контраст изображения. Например, на рис. 2.14  представлен график функции, усиливающей контраст и увеличивающей яркость  изображения.<br>
  <img width="241" height="188" src="lk5_clip_image002_0000.gif"><br>
  Рис. <a name="Рис_растр_яркостьИконтраст"></a>2.14 . Увеличение яркости и контрастности</p>
<p>Преобразование яркости/контраста может быть применено и к отдельным  компонентам модели RGB, например к компоненту красного цвета. Тогда  яркость/контраст будут изменяться только для красного компонента, а для других  компонент они останутся неизменными. Более того, можно задавать различные  преобразования яркости/контраста одновременно для каждого компонента модели  RGB. </p>
<h3><a name="_Toc116974030"></a><a name="_Toc88449706">Масштабирование  изображения</a></h3>
<p>Масштабирование изображения позволяет сжать или растянуть  его по горизонтали и/или вертикали. При этом изменяется ширина и/или высота  изображения. Для масштабирования задаются масштабные коэффициенты &ndash; то,  насколько нужно сжать/растянуть изображение по горизонтали или вертикали.  Масштабные коэффициенты могут задаваться в нормализованной, процентной или  непосредственной форме. В нормализованной форме за единицу принимаются размеры  исходного изображения. Значения меньше единицы указывают на сжатие изображения,  значения больше единицы &ndash; на растяжение. В процентной форме нормализованные  значения умножаются на 100 %. В непосредственной форме новые размеры по горизонтали  и вертикали задаются в виде количества пикселей по тому или другому измерению.<br>
  Возникает вопрос о том, каким образом определять цвета при  изменении размеров изображения. Существует два основных подхода к этой проблеме:</p>
<ol>
  <li>Цвет  пикселя в масштабированном изображении принимается равным цвету ближайшего к  нему пикселя исходного изображения.</li>
  <li>Использование  интерполяции. В этом случае цвет пикселя масштабируемого изображения  вычисляется, как значение некоторой интерполирующей функции от цветов соседних  пикселей в исходном изображении. </li>
</ol>
<p>При использовании билинейной интерполяции цвет вычисляется,  как взвешенная сумма ближайших четырёх пикселей исходного изображения (при  увеличении) или как взвешенная сумма группы пикселей (при уменьшении).<br>
  Первый подход достаточно прост, но не всегда даёт приемлемое  качество обработанного изображения. Например, если новый размер намного больше  старого, то возникает блочная структура изображения, т. е. каждый пиксель  исходного изображения соответствует квадратной области пикселей одного и того  же цвета в обработанном изображении. Эта аномалия представлена на рис. 2.15. <br>
  С другой стороны, если новый размер намного меньше старого,  то при масштабировании одному пикселю обработанного изображения соответствует  группа пикселей исходного изображения, причём в процессе масштабирования  фактически выбирается случайный пиксель из этой группы. </p>
<p><img width="555" height="350" src="lk5_clip_image002_0001.gif"><br>
Рис. <a name="Рис_растр_масштаб"></a>2.15 . Некорректное увеличение<br>
Подход, использующий интерполяцию, позволяет достичь более высокого  качества изображения, но более сложен в реализации. Обычно используется  билинейная или бикубическая интерполяция. Бикубическая интерполяция позволяет  получить изображение с более высоким качеством, чем билинейная интерполяция.  Однако следует заметить, что при дальнейшем повышении порядка интерполяции  качество получаемого изображения может улучшаться незначительно.<br>
Приведем простейшую формулу, которая позволяет определить ближайший  пиксель исходного изображения (без использования интерполяции):</p>
<p align="center"><em>Cnew</em>[<em>i</em>][<em>j</em>] = <em>Cold</em> [<em>k</em>1&middot;<em> i</em>] [<em>k</em>2&middot;<em> j</em>], где<img width="87" height="27" src="lk5_clip_image004.gif">, <img width="87" height="27" src="lk5_clip_image006.gif">;<br>
  <em>k</em>1<em> = </em><em><img width="37" height="45" src="lk5_clip_image008.gif"></em>, <em>k</em>2<em> = </em><em><img width="36" height="45" src="lk5_clip_image010.gif"></em>.</p>
<p>Параметр <em>W</em> определяет размер изображения по  горизонтали, измеряемый в пикселях. Параметр <em>H</em> определяет размер по вертикали. Параметры <em>i</em> и <em>j</em> определяют  соответственно строку и столбец матрицы изображения и изменяются в пределах  высоты и ширины изображения соответственно.</p>
<h3><a name="_Toc116974031"></a><a name="_Toc88449707">Преобразование  поворота</a></h3>
<p>Преобразование поворота, также как и при рассмотрении  плоских геометрических объектов, позволяет поворачивать исходное изображение на  заданный угол. Поворот осуществляется вокруг центра изображения. При этом  возможны два варианта поворота:<br>
  1. Области  изображения, вышедшие за его границы при повороте отсекаются, а незаполненные  части заполняются каким-либо цветом.<br>
  2. Рассчитывается  новый размер изображения на основе угла поворота таким образом, чтобы  повёрнутое изображение целиком поместилось в новые размеры. Незаполненные части  изображения также заполняются каким-либо цветом.<br>
  В любом случае для расчёта преобразования поворота может  быть использована следующая формула:</p>
<p align="center"><em>Cnew</em>[<em>i</em>][<em>j</em>] = <img width="280" height="53" src="lk5_clip_image012.gif"><br>
  <em>a</em> = <img width="109" height="48" src="lk5_clip_image014.gif">; <em>b</em> = <img width="113" height="45" src="lk5_clip_image016.gif">;<br>
  <img width="87" height="27" src="lk5_clip_image004_0000.gif">; <img width="87" height="27" src="lk5_clip_image006_0000.gif">.</p>
<p>В этой формуле параметр <em>C</em> определяет цвет, которым заполняются пустые участки изображения. Параметр &phi;  определяет угол поворота по часовой стрелке в радианах.<br>
  Приведённая формула округляет преобразованные координаты.  Однако можно использовать и билинейную интерполяцию, когда цвет пикселя  вычисляется как взвешенная сумма цветов четырёх соседних пикселей.</p>
</body>
</html>
