<!-- (C) 2016 Хаджинова Н.В., каф. ИТАС, БГУИР -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//RU">
<HTML>
<HEAD>
<LINK rel=stylesheet href="Оболочка/css/style.css" type=text/css>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1251">
<META HTTP-EQUIV="Content-Language" CONTENT="ru">
<title>Лекция № 15 &quot;Фракталы&quot;</title>
</head>

<body>
<div align="center">
  <h1>Лекция № 15 &quot;<strong>Фракталы</strong>&quot; </h1>
</div>
<hr>
<h2>Темы, рассматриваемые в данной лекции: </h2>
<ol>
  <li>Историческая справка. Классификация фракталов.</li>
  <li>Геометрические фракталы. Кривая Коха, снежинка Коха, Дракон Хартера  &ndash;хейтуэя. Использование L-систем для построения &laquo;дракона&raquo;. Ковер и треугольник  Серпинского. </li>
  <li>Алгебраические фракталы. Построение множества Мандельброта. Построение  множества Жюлиа.</li>
  <li>Стохастические фракталы.</li>
  <li>Системы итерируемых функций для построения фракталов. Сжатие изображений  с использованием системы итерируемых функций.<hr>
  </li>
</ol>
<h3><strong>Понятие фрактала и  история появления фрактальной графики</strong></h3>
<p>  Вы, наверное,  часто видели довольно хитроумные картины, на которых непонятно что изображено,  но все равно необычность их форм завораживает и приковывает внимание. Как  правило, это хитроумные формы не поддающиеся, казалось бы, какому&ndash;либо  математическому описанию. Вы, к примеру, видели узоры на стекле после мороза  или, к примеру, хитроумные кляксы, оставленные на листе чернильной ручкой, так  вот что&ndash;то подобное вполне можно записать в виде некоторого алгоритма, а,  следовательно, доступно объясниться с компьютером. Подобные множества называют <strong>фрактальными</strong>. Фракталы не похожи на  привычные нам фигуры, известные из геометрии, и строятся они по определенным  алгоритмам, а эти алгоритмы с помощью компьютера можно изобразить на экране.  Вообще, если все слегка упростить, то фракталы &ndash; это некое преобразование  многократно примененное к исходной фигуре. <br>
  Первые  идеи фрактальной геометрии возникли в   19 веке. <strong>Кантор</strong> с помощью  простой рекурсивной (повторяющейся) процедуры превратил линию в набор  несвязанных точек (так называемая <strong>Пыль  Кантора</strong>). Он брал линию и удалял центральную треть и после этого повторял  то же самое с оставшимися отрезками. <strong>Пеано</strong> нарисовал особый вид линии (см. рис). Для ее рисования Пеано использовал  следующий алгоритм. <br>
  <img width="500" height="62" src="lk3_clip_image001.gif" alt="Построение кривой Пеано 1,2,3, 4,...6 итерации."><br>
  На  первом шаге он брал прямую линию и заменял ее на 9 отрезков длинной в 3 раза меньшей, чем длинна исходной  линии (Часть 1 и 2 рисунка 1). Далее он делал то же самое с каждым отрезком  получившейся линии. И так до бесконечности. Ее уникальность в том, что она  заполняет всю плоскость. Доказано, что для каждой точки на плоскости можно  найти точку, принадлежащую линии <strong>Пеано</strong>. <strong>Кривая Пеано</strong> и <strong>пыль Кантора</strong> выходили за рамки обычных геометрических объектов. Они  не имели четкой размерности. <strong>Пыль  Кантора</strong> строилась вроде бы на основании одномерной прямой, но состояла из  точек, а <strong>кривая Пеано</strong> строилась на  основании одномерной линии, а в результате получалась плоскость. Во многих  других областях науки появлялись задачи, решение которых приводило к странным  результатам, на подобие описанных (Броуновское движение, цены на акции).<br>
  Вплоть  до 20 века шло накопление данных о таких странных объектах, без какой либо попытки  их систематизировать. Так было, пока за них не взялся <strong>Бенуа Мандельброт</strong> &ndash; отец современной фрактальной геометрии и слова <strong>фрактал</strong>. Работая в IBM математическим  аналитиком, он изучал шумы в электронных схемах, которые невозможно было  описать с помощью статистики. Постепенно сопоставив факты, он пришел к открытию  нового направления в математике &ndash; фрактальной геометрии. <br>
  Сам  Мандельброт вывел слово <strong>fractal</strong> от  латинского слова fractus, что означает разбитый (поделенный на части). И одно  из определений фрактала &ndash; это геометрическая фигура, состоящая из частей и  которая может быть поделена на части, каждая из которых будет представлять  уменьшенную копию целого (по крайней мере, приблизительно). <br>
  Как  только <strong>Мандельброт</strong> открыл понятие <strong>фрактала</strong>, оказалось, что мы буквально  окружены ими. Фрактальны слитки металла и горные породы, фрактальны расположение  ветвей, узоры листьев, капиллярная система растений; кровеносная, нервная,  лимфатическая системы в организмах животных, фрактальны речные бассейны,  поверхность облаков, линии морских побережий, горный рельеф...<br>
  Чтобы  представить себе фрактал понаглядней рассмотрим пример, приведенный в книге  Б.Мандельброта &laquo;Фрактальная геометрия природы&raquo; ставший классическим &ndash; &laquo;Какова  длина берега Британии?&raquo;. Ответ на этот вопрос не так прост, как кажется. Все  зависит от длины инструмента, которым мы будем пользоваться. Померив берег с  помощью километровой линейки мы получим какую&ndash;то длину. Однако мы пропустим  много небольших заливчиков и полуостровков, которые по размеру намного меньше  нашей линейки. Уменьшив размер линейки до, скажем, 1 метра &ndash; мы учтем эти  детали ландшафта, и, соответственно длина берега станет больше. Пойдем дальше и  измерим длину берега с помощью миллиметровой линейки, мы тут учтем детали,  которые больше миллиметра, длина будет еще больше. В итоге ответ на такой,  казалось бы, простой вопрос может поставить в тупик кого угодно &ndash; длина берега  Британии бесконечна. <br>
  Основное  свойство фракталов &ndash; <strong>самоподобие</strong>.  Любой микроскопический фрагмент фрактала в том или ином отношении воспроизводит  его глобальную структуру. В простейшем случае часть фрактала представляет собой  просто уменьшенный целый фрактал.<br>
  Отсюда  основной рецепт построения фракталов: возьми простой мотив и повторяй его,  постоянно уменьшая размеры. В конце концов выйдет структура, воспроизводящая  этот мотив во всех масштабах.<br>
  <img width="179" height="189" src="lk3_clip_image002.gif"><br>
  Берем  отрезок и среднюю его треть переламываем под углом 60 градусов. Затем повторяем  эту операцию с каждой из частей получившейся ломаной &ndash; и так до бесконечности.  В результате мы получим простейший фрактал &ndash; <strong>триадную кривую</strong>, которую в 1904 году открыла математик <strong>Хельга фон Кох</strong>.<br>
  Если  на каждом шаге не только уменьшать основной мотив, но также смещать и  поворачивать его, можно получить более интересные и реалистически выглядящие  образования, например, лист папоротника или даже целые их заросли. А можно  построить весьма правдоподобный фрактальный рельеф местности и покрыть её очень  симпатичным лесом. В 3D Studio Max, например, для генерации деревьев  используется фрактальный алгоритм. И это не исключение &ndash; большинство текстур  местности в современных компьютерных играх представляют фракталы. Горы, лес и  облака на картинке &ndash; фракталы.<br>
Файлы  фрактальных изображений имеют расширение fif. Обычно файлы в формате fif  получаются несколько меньше файлов в формате jpg, но бывает и наоборот. Самое  интересное начинается, если рассматривать картинки со все большим увеличением.  Файлы в формате jpg почти сразу демонстрируют свою дискретную природу &ndash;  появляется пресловутая лесенка. А вот fif файлы, как и положено фракталам, с  ростом увеличения показывают все новую степень детализации структуры, сохраняя  эстетику изображения.</p>
<p align="center"><strong>Понятие  размерности и ее расчет</strong><br>
  В  своей повседневной жизни мы постоянно встречаемся с размерностями. Мы  прикидываем длину дороги, узнаем площадь квартиры и т.д. Это понятие вполне  интуитивно ясно и, казалось бы, не требует разъяснения. Линия имеет размерность  1. Это означает, что, выбрав точку отсчета, мы можем любую точку на этой линии  определить с помощью 1 числа &ndash; положительного или отрицательного. Причем это  касается всех линий &ndash; окружность, квадрат, парабола и т.д. <br>
  Размерность  2 означает, что любую точку мы можем однозначно определить двумя числами. Не  надо думать, что двумерный &ndash; значит плоский. Поверхность сферы тоже двумерна  (ее можно определить с помощью двух значений &ndash; углов наподобие ширины и  долготы). <br>
  Если  смотреть с математической точки зрения, то размерность определяется следующим  образом: для одномерных объектов &ndash; увеличение в два раза их линейного размера  приводит к увеличению размеров (в данном случае длинны) в два раза (2^1).<br>
  Для  двумерных объектов увеличение в два раза линейных размеров приводит к  увеличению размера (например, площадь прямоугольника) в четыре раза (2^2). <br>
  Для  3&ndash;х мерных объектов увеличение линейных размеров в два раза приводи к  увеличению объема в восемь раз (2^3) и так далее. <br>
  Таким  образом, размерность D можно рассчитать исходя из зависимости увеличения &laquo;размера&raquo;  объекта S от увеличения линейных размеров L. D=log(S)/log(L). Для линии  D=log(2)/log(2)=1. Для плоскости D=log(4)/log(2)=2. Для объема  D=log(8)/log(2)=3. <br>
  Рассчитаем  размерность для кривой Пеано. Исходная линия, состоящая из трех отрезков длинны  Х, заменяется на 9 отрезков втрое меньшей длинны. Таким образом, при увеличении  минимального отрезка в 3  раза длина всей линии увеличивается в 9  раз и D=log(9)/log(3)=2 &ndash; двумерный объект.<br>
Когда  размерность фигуры получаемой из каких&ndash;то простейших объектов (отрезков) больше  размерности этих объектов &ndash; мы имеем дело с фракталом. </p>
<h2 align="center"><a name="Geometry">&nbsp;</a></h2>
<h2 align="center">Геометрические фракталы </h2>
<p>Именно с них и  начиналась история фракталов. Этот тип фракталов получается путем простых  геометрических построений. Обычно при построении этих фракталов поступают так:  берется &laquo;затравка&raquo; &ndash; аксиома &ndash; набор отрезков, на основании которых будет  строиться фрактал. Далее к этой &laquo;затравке&raquo; применяют набор правил, который  преобразует ее в какую&ndash;либо геометрическую фигуру. Далее к каждой части этой  фигуры применяют опять тот же набор правил. С каждым шагом фигура будет  становиться все сложнее и сложнее, и если мы проведем бесконечное количество  преобразований &ndash; получим <strong>геометрический  фрактал. </strong><br>
  Рассмотренная ранее <strong>кривая Пеано</strong> является геометрическим  фракталом. На рис. ниже приведены другие примеры геометрических фракталов  (слева направо Снежинка Коха, Лист, Треугольник Серпинского). <br>
  <img width="366" height="276" src="lk3_clip_image004.jpg"><br>
  <em>Рис. Снежинка Коха</em><br>
  <br>
  <img width="376" height="282" src="lk3_clip_image006.jpg"><br>
  <em>Рис. Лист</em><br>
  <br>
  <img width="500" height="375" src="lk3_clip_image007.gif"><br>
  <em>Рис. Треугольник Серпинского</em><br>
  Из этих геометрических  фракталов очень интересным и довольно знаменитым является &ndash; <strong>снежинка Коха</strong>. Строится она на основе  равностороннего треугольника. Каждая линия которого заменяется на 4 линии  каждая длинной в 1/3 исходной. Таким образом, с каждой итерацией длинна кривой  увеличивается на треть. И если мы сделаем бесконечное число итераций &ndash; получим  фрактал &ndash; снежинку Коха бесконечной длинны. Получается, что наша бесконечная  кривая покрывает ограниченную площадь. <br>
  Размерность  снежинки Коха (при увеличении снежинки в   3 раза ее длина возрастает в   4 раза) D=log(4)/log(3)=1.2619... <br>
  Для построения  геометрических фракталов хорошо приспособлены так называемые <strong>L&ndash;Systems</strong>. Суть этих систем состоит в  том, что имеется определенных набор символов системы, каждый из которых  обозначает определенное действие и набор правил преобразования символов. </p>
<p align="center"><strong>Алгебраические  фракталы</strong></p>
<p>Вторая большая  группа фракталов &ndash; <strong>алгебраические</strong>.  Свое название они получили за то, что их строят, на основе алгебраических  формул иногда весьма простых. Методов получения алгебраических фракталов  несколько. Один из методов представляет собой многократный (итерационный)  расчет функции Zn+1=f(Zn), где Z &ndash; комплексное число, а f некая функция. Расчет  данной функции продолжается до выполнения определенного условия. И когда это  условие выполнится &ndash; на экран выводится точка. При этом значения функции для  разных точек комплексной плоскости может иметь разное поведение:</p>
<ol>
  <li>с течением  времени стремится к бесконечности. </li>
  <li>стремится к 0 </li>
  <li>принимает несколько  фиксированных значений и не выходит за их пределы. </li>
  <li>поведение хаотично,  без каких либо тенденций. </li>
</ol>
<p>Чтобы  проиллюстрировать алгебраические фракталы обратимся к классике &ndash; <strong>множеству Мандельброта</strong>. <br>
  <img width="500" height="187" src="lk3_clip_image008.gif"><br>
  <em>Рис. Множество  Мандельброта</em><br>
  Для его построения  нам необходимы комплексные числа. Комплексное число &ndash; это число, состоящее из  двух частей &ndash; действительной и мнимой, и обозначается оно a+bi. Действительная  часть a это обычное число в нашем представлении, а bi &ndash; мнимая часть. i &ndash;  называют мнимой единицей, потому, что если мы возведем i в квадрат, то получим &ndash;1. <br>
  Комплексные числа  можно складывать, вычитать, умножать, делить, возводить в степень и извлекать  корень, нельзя только их сравнивать. Комплексное число можно изобразить как  точку на плоскости, у которой координата Х это действительная часть a, а Y это  коэффициент при мнимой части b.<br>
  Функционально  множество Мандельброта определяется как Zn+1=Zn*Zn+C. Для построения множества  Мандельброта воспользуемся алгоритмом на Бейсике. </p>
<pre>For a=&ndash;2 to 2 ' для всех действительных а от &ndash;2 до 2</pre>
<pre>For b=&ndash;2 to 2 ' для всех мнимых b от &ndash;2 до 2</pre>
<pre>С=a+bi</pre>
<pre>Z0=0+0i</pre>
<pre>'Принадлежит множеству Мандельброта</pre>
<pre>Lake=True </pre>
<pre>'Повторяем 255 раз (для режима 256 цветов)</pre>
<pre>For iteration=1 to 255</pre>
<pre>Zn=Z0*Z0+C</pre>
<pre>'Проверили &ndash; не принадлежит </pre>
<pre>If abs(Zn)&gt;2 then Lake=False: Exit For </pre>
<pre>Z0=Zn</pre>
<pre>Next</pre>
<pre>'Нарисовали черную точку,принадлежащую &quot;озеру&quot; Мандельброта.</pre>
<pre>If Lake=True Then PutPixel(a,b,BLACK) </pre>
<pre>' Нарисовали точку не принадлежащую множеству или лежащую на границе.</pre>
<pre>Else PutPixel(a, b, iteration) </pre>
<pre>Next</pre>
<pre>Next</pre>
<p>А теперь опишу  программку словами. Для всех точек на комплексной плоскости в интервале от &ndash;2+2i  до 2+2i выполняем некоторое достаточно большое количество раз Zn=Z0*Z0+C,  каждый раз проверяя абсолютное значение Zn. Если это значение больше 2, что  рисуем точку с цветом равным номеру итерации на котором абсолютное значение  превысило 2, иначе рисуем точку черного цвета. Все множество Мандельброта в  полной красе у нас перед глазами. <br>
  Черный цвет в  середине показывает, что в этих точках функция стремится к нулю &ndash; это и есть <strong>множество Мандельброта</strong>. За пределами  этого множества функция стремится к бесконечности. А самое интересное это  границы множества. Они то и являются фрактальными. На границах этого множества  функция ведет себя непредсказуемо &ndash; хаотично. <br>
  Меняя функцию,  условия выхода из цикла можно получать другие фракталы. Например, взяв вместо  выражения С=a+bi выражение Z0=a+bi, а С присваивать произвольные значения мы  получим <strong>множество Жюлиа</strong>, тоже красивый  фрактал. <br>
  Для множества  Мандельброта тоже проявляется самоподобие. </p>
<h2 align="center"><a name="Stochastic">Стохастические фракталы</a></h2>
<p>Типичный  представитель данного класса фракталов &laquo;<strong>Плазма&raquo;</strong>. <br>
  <img width="295" height="221" src="lk3_clip_image010.jpg"><br>
  <em>Рис. Плазма</em><br>
  Для ее построения  возьмем прямоугольник и для каждого его угла определим цвет. Далее находим  центральную точку прямоугольника и раскрашиваем ее в цвет равный среднему  арифметическому цветов по углам прямоугольника плюс некоторое случайное число.  Чем больше случайное число &ndash; тем более &laquo;рваным&raquo; будет рисунок. Если, например,  сказать, что цвет точки это высота над уровнем моря, то получим вместо плазмы &ndash;  горный массив. Именно на этом принципе моделируются горы в большинстве  программ. С помощью алгоритма, похожего на плазму строится карта высот, к ней  применяются различные фильтры, накладываем текстуру.<br>
  <img width="500" height="276" src="lk3_clip_image012.jpg"></p>
<h2><a name="Iterated">&nbsp;</a></h2>
<h2 align="center">Системы итерируемых функций (IFS &ndash;  Iterated Function Systems) </h2>
<p>Эта группа  фракталов получила широкое распространение благодаря работам <strong>Майкла Барнсли</strong> из технологического  института штата Джорджия. Он пытался кодировать изображения с помощью  фракталов. Запатентовав несколько идей по кодированию изображений с помощью  фракталов, он основал фирму &laquo;Iterated Systems&raquo;, которая через некоторое время  выпустила первый продукт &laquo;Images Incorporated&raquo;, в котором можно было  изображения переводить из растровой формы во фрактальную FIF. <br>
  Это позволяло  добиться высоких степеней сжатия. При низких степенях сжатия качество рисунков  уступало качеству формата JPEG, но при высоких картинки получались более  качественными. В любом случае этот формат не прижился, но работы по его  усовершенствованию ведутся до сих пор. Ведь этот формат не зависит от  разрешения изображения. Так как изображение закодировано с помощью формул, то  его можно увеличить до любых размеров и при этом будут появляться новые детали,  а не просто увеличится размер пикселей.<br>
  <img width="344" height="160" src="lk3_clip_image013.gif"><br>
  Если в L&ndash;systems  (алгебраических фракталах) речь шла о замене прямой линии неким полигоном, то в  IFS мы в ходе каждой итерации заменяем некий полигон (квадрат, треугольник,  круг) на набор полигонов, каждый их которых подвергнут аффинным  преобразованиям. При аффинных преобразованиях исходное изображение меняет  масштаб, параллельно переносится вдоль каждой из осей и вращается на некоторый  угол. </p>
<h2 align="center"><a name="Chaos">Фракталы и хаос</a></h2>
<p>Понятие фрактал  неразрывно связано с понятием хаос. <strong>Хаос</strong> &ndash; это отсутствие предсказуемости. Хаос возникает в динамических системах, когда  для двух очень близких начальных значений система ведет себя совершенно по&ndash;разному.  Пример хаотичной динамической системы &ndash; погода (метеорологи шутят: &laquo;Взмах крыла  бабочки в Техасе приводит к урагану во Флориде&raquo;). <br>
  Хорошо  проиллюстрировать хаотичное поведение можно с помощью так называемого logistic  equation x=c*x(1&ndash;x). Пришло это выражение из биологии, т.к. это грубая модель  популяции животных. Так вот при исследовании поведения этой функции выяснилась  интересная ее особенность. Если с &ndash; фактор роста популяции находится в пределах  от 1 до 3, то через некоторое количество итераций популяция стабилизируется. <br>
  <img width="448" height="335" src="lk3_clip_image015.jpg"><br>
  При с=3 наша  функция раздваивается &ndash; через определенное число итераций приходим к ситуации,  когда высокая популяция в один год сменяется низкой в следующий и значение  выражения как бы скачет между двумя значениями. <br>
  При с=3.45 она  раздваивается снова и у нас уже имеется четырехлетний цикл. <br>
  Далее при росте с  функция раздваивается все быстрее и быстрее: при с=3.54, с=3.564, с=3.569 ... <br>
  И в точке 3.57 начинается хаос. Значения  выражения не имеют какой либо периодичности или структуры. На рисунке  изображена зависимость поведения функции от величины с. </p>
<h2>&nbsp;</h2>
</body>
</html>
